<!DOCTYPE html>
<html>
  <head>
    <title>Beware of floating point numbers - The Rootless Wanderer</title>
    <meta http-equiv="content-type" name="viewport" content="width=device-width, initial-scale=1.0, charset=utf-8">
    <link rel="stylesheet" href="/assets/css/github.css">
    <link rel="stylesheet" href="/assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="/assets/bootstrap/css/bootstrap-responsive.min.css">
    <link rel="stylesheet" href="/assets/css/prettify.css">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Noto+Serif">
    <link rel="stylesheet" href="/assets/css/app.css">
    <style type="text/css">
      body { padding-top: 60px; padding-bottom: 40px; }
      
      /* Large desktop */
      @media (min-width: 1200px) {
          body { font-size:100%;}
          .wrap {max-width:770px;}
      }
      
      @media (max-width: 980px) {
         body {
            padding-top: 0px;
         }
      }
      
      /* Portrait tablet to landscape and desktop */
      @media (min-width: 768px) and (max-width: 979px) {
          body { font-size:95%;}
          h1 {
            font-size: 22pt;
          }
          h2 {
            font-size: 18pt;
          }
          h3 {
            font-size: 16pt;
          }
      }
      
      /* Landscape phone to portrait tablet */
      @media (max-width: 767px) {
          body { font-size:90%;}
          h1 {
            font-size: 20pt;
          }
          h2 {
            font-size: 16pt;
          }
          h3 {
            font-size: 14pt;
          }
      }
      
      /* Landscape phones and down */
      @media only screen and (max-width: 480px) {
          body { font-size:85%;}
          h1 {
            font-size: 18pt;
          }
          h2 {
            font-size: 14pt;
          }
          h3 {
            font-size: 12pt;
          }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="navbar navbar-fixed-top">
        <div class="navbar-inner">
          <div class="container"><a data-toggle="collapse" data-target=".nav-collapse" class="btn btn-navbar"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></a><a href="http://blog.sanjeevonline.com" class="brand">The Rootless Wanderer</a>
            <div class="nav-collapse collapse"><!-- .nav, .navbar-search, .navbar-form, etc -->
              <ul class="nav">
                <li><a href="/blog.html">Blog</a></li>
                <li class="dropdown"><a href="#" data-toggle="dropdown" class="dropdown-toggle">Tags<b class="caret"></b></a>
                  <ul class="dropdown-menu">
                    <li><a href="/tag/agile.html">agile</a></li>
                    <li><a href="/tag/best-practices.html">best-practices</a></li>
                    <li><a href="/tag/eclipse.html">eclipse</a></li>
                    <li><a href="/tag/java.html">java</a></li>
                    <li><a href="/tag/nodejs.html">nodejs</a></li>
                    <li><a href="/tag/productivity.html">productivity</a></li>
                    <li><a href="/tag/travel.html">travel</a></li>
                    <li><a href="/tag/trivia.html">trivia</a></li>
                  </ul>
                </li>
                <li><a href="/archive.html">Archive</a></li>
              </ul>
            </div>
            <div class="pull-right nav-collapse collapse">
              <form id="search-form" action="http://www.google.com/search" method="get" class="navbar-search pull-left"><span class="glass js-search-action"><i></i></span>
                <input type="hidden" value="UTF-8" name="ie">
                <input type="hidden" value="UTF-8" name="oe">
                <input type="hidden" value="blog.sanjeevonline.com" name="domains">
                <input type="hidden" value="blog.sanjeevonline.com" name="sitesearch">
                <input name="q" type="text" placeholder="Search using Google..." class="search-query span2">
              </form>
            </div>
          </div>
        </div>
      </div>
      <article class="post shadow">
        <div>
          <h1>Beware of floating point numbers</h1>
          <footer class="footer">
            <div style="font-size: 13px" class="inner">
              <p class="pull-right"><a href="/blog.html" class="back"><< back to index</a></p>Posted by&nbsp;<span class="author"><a href="mailto:sanjeevonline@gmail.com">Sanjeev Kumar</a></span>|on&nbsp;<a href="/archive.html" class="back">October 20, 2010</a>|Tags :&nbsp;<a href="/tag/java.html" rel="category tag" title="View all posts in 'java'">java</a>&nbsp;<a href="/tag/best-practices.html" rel="category tag" title="View all posts in 'best-practices'">best-practices</a>&nbsp;
            </div>
          </footer>
        </div>
        <hr>
        <section class="content"><p>Outside of a scientific or engineering context, the use of float and double (and the corresponding wrapper classes Float and Double ) should likely be avoided. The fundamental problem is that rounding errors will always occur when using these data types - they are unavoidable.</p>
<p>In a typical business application, using float and double to represent money values is dangerous, because of these rounding issues. Instead, BigDecimal should usually be used to represent money. It is also a common practice to have utility classes like &quot;MonetaryAmount.java&quot; that are wrappers over &quot;BigDecimal&quot; class of the JDK and that provides helper methods and functionality as needed by the business application.</p>
<p><span class="more"></span></p>
<p>From an IBM article on this topic :</p>
<p><i>
&quot;...binary floating-point arithmetic should not be used for financial, commercial, and user-centric applications or web services because the decimal data used in these applications cannot be represented exactly using binary floating-point.&quot;
</i></p>
<p>From an article by Brian Goetz :</p>
<p><i>
&quot;...it is a bad idea to use floating point to try to represent exact quantities like monetary amounts. Using floating point for dollars-and-cents calculations is a recipe for disaster. Floating point numbers are best reserved for values such as measurements, whose values are fundamentally inexact to begin with.&quot; 
</i></p>
</section>
        <hr>
        <div id="social_bottom" class="topsocial">
          <div class="social"><a href="/articles/2010-10-20-Beware-Of-Floating-Points/" data-url="http://blog.sanjeevonline.com/articles/2010-10-20-Beware-Of-Floating-Points/" data-text="Beware of floating point numbers #java #best-practices /via @sandee_sh" data-count="vertical" class="twitter-share-button">
              <twitter-share-button></twitter-share-button></a><script type="text/javascript" src="//platform.twitter.com/widgets.js"></script>
          </div>
          <div class="social"><g:plusone size="tall" href="http://blog.sanjeevonline.com/articles/2010-10-20-Beware-Of-Floating-Points/"></g:plusone></div>
          <div class="social">
            <script src="http://platform.linkedin.com/in.js" type="text/javascript"></script>
            <script type="IN/Share" data-url="http://blog.sanjeevonline.com/articles/2010-10-20-Beware-Of-Floating-Points/" data-counter="top"></script>
          </div>
        </div>
        <hr>
        <h3>Similar Articles</h3>
        <table class="table table-striped">
          <tbody>
            <tr>
              <td><a href="/articles/2010-08-09-Composition-Inheritance/" title="java,best-practices">Prefer composition over inheritance</a></td>
            </tr>
            <tr>
              <td><a href="/articles/2010-08-29-Overiride-Carefully/" title="java,best-practices">Overridable methods need special care</a></td>
            </tr>
            <tr>
              <td><a href="/articles/2010-10-20-Beware-Of-Floating-Points/" title="java,best-practices">Beware of floating point numbers</a></td>
            </tr>
            <tr>
              <td><a href="/articles/2010-10-30-Package-By-Features/" title="best-practices,java">Package by feature not layer</a></td>
            </tr>
            <tr>
              <td><a href="/articles/2010-09-19-Use-Final-Liberally/" title="java,best-practices">Use final liberally. Please do.</a></td>
            </tr>
          </tbody>
        </table>
        <h4></h4>
        <div id="disqus_thread"></div><script type="text/javascript">
        var disqus_shortname = 'sanjeevonline';
        (function() {
           var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
           dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
           (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
      </article><hr />
      <footer class="footer">
        <div style="font-size: 13px" class="inner">
        </div>
      </footer>
    </div>
    <!--le javascript-->
    <!--script(src='http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js')-->
    <!--script(src= '#{locals.baseUrl}' + '/assets/javascript/jquery-twitter-plugin.js')-->
    <script src="/assets/javascript/jquery.min.js"></script>
    <script src="/assets/javascript/app.js"></script>
    <script src="/assets/bootstrap/js/bootstrap-transition.js"></script>
    <script src="/assets/bootstrap/js/bootstrap-alert.js"></script>
    <script src="/assets/bootstrap/js/bootstrap-modal.js"></script>
    <script src="/assets/bootstrap/js/bootstrap-scrollspy.js"></script>
    <script src="/assets/bootstrap/js/bootstrap-tab.js"></script>
    <script src="/assets/bootstrap/js/bootstrap-tooltip.js"></script>
    <script src="/assets/bootstrap/js/bootstrap-popover.js"></script>
    <script src="/assets/bootstrap/js/bootstrap-button.js"></script>
    <script src="/assets/bootstrap/js/bootstrap-collapse.js"></script>
    <script src="/assets/bootstrap/js/bootstrap-carousel.js"></script>
    <script src="/assets/bootstrap/js/bootstrap-typeahead.js"></script>
    <script src="/assets/bootstrap/js/bootstrap-dropdown.js"></script>
    <script src="http://platform.linkedin.com/in.js"></script><script type="text/javascript">
      (function() {
        var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
        po.src = 'https://apis.google.com/js/plusone.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
      })();
    </script>
    <script>
       (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
       (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
       m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
       })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    |
       ga('create', 'UA-41222870-1', 'sanjeevonline.com');
       ga('send', 'pageview');
    |
    </script>
  </body>
</html>